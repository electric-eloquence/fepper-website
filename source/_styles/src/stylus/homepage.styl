@import 'style'

$video-width-max = 1728px
$video-height-max = ($video-width-max / 3)

.branding
  padding-bottom: $branding-pad
.video
  overflow: hidden
  padding-bottom: (100% / 3)
  position: -webkit-sticky
  position: sticky
  top: 0
  width: 100%
  z-index: -1
  &__bg
    background-color: black
    position: absolute
    top: 0
    left: 0
    width: 50%
    height: 100%
  &__img
    position: absolute

    &--gen-0
      &--0
        width: 50%
        z-index: 1
      &--1
        height: 100%

    &--gen-0--3,
    &--gen-1--0
      top: 'calc(%s + 0.25px)' % (100% * 48 / 640) // To fix fractional pixel rendering in Chrome.
      width: 30%
    &--gen-0--2,
    &--gen-0--4,
    &--gen-1--1
      top: (100% - 10%) // top rule (not bottom) necessary for Safari.
      width: 50%
    &--gen-0--5,
    &--gen-1--2
      width: calc(50% + 0.5px) // To fix fractional pixel rendering in Chrome.
    &--gen-0--5,
    &--gen-1--2,
    &--gen-1--3,
    &--gen-1--4,
    &--gen-2--0,
    &--gen-2--1
      left: 50%

    &--gen-1--3,
    &--gen-2--0
      top: 'calc(%s + 0.25px)' % (100% * 24 / 640) // To fix fractional pixel rendering in Chrome.
      width: 15%
    &--gen-1--4,
    &--gen-2--1
      top: (50% - 5%)
      width: 25%
    &--gen-1--5,
    &--gen-2--2
      width: calc(25% + 0.5px) // To fix fractional pixel rendering in Chrome.
    &--gen-1--5,
    &--gen-2--2,
    &--gen-2--3,
    &--gen-2--4,
    &--gen-3--0,
    &--gen-3--1
      left: (50% + (100% * 1 / 4))

    &--gen-2--3,
    &--gen-3--0
      top: 'calc(%s + 0.25px)' % (100% * 12 / 640) // To fix fractional pixel rendering in Chrome.
      width: 7.5%
    &--gen-2--4,
    &--gen-3--1
      top: (25% - 2.5%)
      width: 12.5%
    &--gen-2--5,
    &--gen-3--2
      width: calc(12.5% + 0.5px) // To fix fractional pixel rendering in Chrome.
    &--gen-2--5,
    &--gen-3--2,
    &--gen-3--3,
    &--gen-3--4,
    &--gen-4--0,
    &--gen-4--1
      left: (50% + (100% * 3 / 8))

    &--gen-3--3,
    &--gen-4--0
      top: 'calc(%s + 0.25px)' % (100% * 6 / 640) // To fix fractional pixel rendering in Chrome.
      width: 3.75%
    &--gen-3--4,
    &--gen-4--1
      top: (12.5% - 1.25%)
      width: 6.25%
    &--gen-3--5,
    &--gen-4--2
      width: calc(6.25% + 0.5px) // To fix fractional pixel rendering in Chrome.
    &--gen-3--5,
    &--gen-4--2,
    &--gen-4--3,
    &--gen-4--4,
    &--gen-5--0,
    &--gen-5--1
      left: (50% + (100% * 7 / 16))

    &--gen-4--3,
    &--gen-5--0
      top: 'calc(%s + 0.25px)' % (100% * 3 / 640) // To fix fractional pixel rendering in Chrome.
      width: 1.875%
    &--gen-4--4,
    &--gen-5--1
      top: (6.25% - 0.625%)
      width: 3.125%
    &--gen-4--5,
    &--gen-5--2
      width: calc(3.125% + 0.5px) // To fix fractional pixel rendering in Chrome.
    &--gen-4--5,
    &--gen-5--2,
    &--gen-5--3,
    &--gen-5--4,
    &--gen-6--0,
    &--gen-6--1
      left: (50% + (100% * 15 / 32))

    &--gen-5--3,
    &--gen-6--0
      top: 'calc(%s + 0.25px)' % (100% * 1.5 / 640) // To fix fractional pixel rendering in Chrome.
      width: 0.9375%
    &--gen-5--4,
    &--gen-6--1
      top: (3.125% - 0.3125%)
      width: 1.5625%
    &--gen-5--5,
    &--gen-6--2
      width: calc(1.5625% + 0.5px) // To fix fractional pixel rendering in Chrome.
    &--gen-5--5,
    &--gen-6--2,
    &--gen-6--3,
    &--gen-6--4,
    &--gen-7--0,
    &--gen-7--1
      left: (50% + (100% * 31 / 64))

    &--gen-6--3,
    &--gen-7--0
      top: 'calc(%s + 0.25px)' % (100% * 0.75 / 640) // To fix fractional pixel rendering in Chrome.
      width: 0.46875%
    &--gen-6--4,
    &--gen-7--1
      top: (1.5625% - 0.15625%)
      width: 0.78125%
    &--gen-6--5,
    &--gen-7--2
      width: calc(0.78125% + 0.5px) // To fix fractional pixel rendering in Chrome.
    &--gen-6--5,
    &--gen-7--2,
    &--gen-7--3,
    &--gen-7--4,
    &--gen-8--0,
    &--gen-8--1
      left: 'calc(%s - 0.5px)' % (50% + (100% * 63 / 128))

    &--gen-7--3,
    &--gen-8--0
      top: 'calc(%s + 0.25px)' % (100% * 0.375 / 640) // To fix fractional pixel rendering in Chrome.
      width: 0.234375%
    &--gen-7--4,
    &--gen-8--1
      top: (0.78125% - 0.078125%)
      width: 0.390625%
    &--gen-7--5,
    &--gen-8--2
      width: calc(0.390625% + 0.5px) // To fix fractional pixel rendering in Chrome.
    &--gen-7--5,
    &--gen-8--2,
    &--gen-8--3,
    &--gen-8--4
      left: 'calc(%s - 0.5px)' % (50% + (100% * 127 / 256))

    &--gen-8
      &--3
        top: 'calc(%s + 0.25px)' % (100% * 0.1875 / 640) // To fix fractional pixel rendering in Chrome.
        width: 0.1171875%
      &--4
        top: (0.390625% - 0.0390625%)
        width: 0.1953125%
      &--5
        left: 'calc(%s - 0.5px)' % (50% + (100% * 255 / 512))
        width: calc(0.1953125% + 0.5px) // To fix fractional pixel rendering in Chrome.

@media all and (min-width: $video-width-max)
  .video
    height: $video-height-max
    padding-bottom: 0
    &__bg
      height: $video-height-max
    &__img

      &--gen-0--1
        height: $video-height-max

      &--gen-0--3,
      &--gen-1--0
        top: (($video-height-max * 48 / 640) + 0.25px) // To fix fractional pixel rendering in Chrome.
        width: ($video-width-max * 0.3)
      &--gen-0--2,
      &--gen-0--4,
      &--gen-1--1
        top: ($video-height-max - ($video-height-max / 10))
      &--gen-0--0,
      &--gen-0--2,
      &--gen-0--4,
      &--gen-0--5,
      &--gen-1--1,
      &--gen-1--2
        width: ($video-width-max / 2)
      &--gen-0--0,
      &--gen-0--1,
      &--gen-0--2,
      &--gen-0--3,
      &--gen-0--4,
      &--gen-1--0,
      &--gen-1--1
        left: 50%
        transform: translateX(-($video-width-max / 2))

      &--gen-1--3,
      &--gen-2--0
        top: (($video-height-max * 24 / 640) + 0.25px) // To fix fractional pixel rendering in Chrome.
        width: ($video-width-max * 0.15)
      &--gen-1--4,
      &--gen-2--1
        top: (($video-height-max / 2) - ($video-height-max / (10 * 2)))
      &--gen-1--4,
      &--gen-1--5,
      &--gen-2--1,
      &--gen-2--2
        width: ($video-width-max / 4)
      &--gen-1--5,
      &--gen-2--2,
      &--gen-2--3,
      &--gen-2--4,
      &--gen-3--0,
      &--gen-3--1
        left: 'calc(50% + %s)' % ($video-width-max * 1 / 4)

      &--gen-2--3,
      &--gen-3--0
        top: (($video-height-max * 12 / 640) + 0.25px) // To fix fractional pixel rendering in Chrome.
        width: ($video-width-max * 0.075)
      &--gen-2--4,
      &--gen-3--1
        top: (($video-height-max / 4) - ($video-height-max / (10 * 4)))
      &--gen-2--4,
      &--gen-2--5,
      &--gen-3--1,
      &--gen-3--2
        width: ($video-width-max / 8)
      &--gen-2--5,
      &--gen-3--2,
      &--gen-3--3,
      &--gen-3--4,
      &--gen-4--0,
      &--gen-4--1
        left: 'calc(50% + %s)' % ($video-width-max * 3 / 8)

      &--gen-3--3,
      &--gen-4--0
        top: (($video-height-max * 6 / 640) + 0.25px) // To fix fractional pixel rendering in Chrome.
        width: ($video-width-max * 0.0375)
      &--gen-3--4,
      &--gen-4--1
        top: (($video-height-max / 8) - ($video-height-max / (10 * 8)))
      &--gen-3--4,
      &--gen-3--5,
      &--gen-4--1,
      &--gen-4--2
        width: ($video-width-max / 16)
      &--gen-3--5,
      &--gen-4--2,
      &--gen-4--3,
      &--gen-4--4,
      &--gen-5--0,
      &--gen-5--1
        left: 'calc(50% + %s)' % ($video-width-max * 7 / 16)

      &--gen-4--3,
      &--gen-5--0
        top: (($video-height-max * 3 / 640) + 0.25px) // To fix fractional pixel rendering in Chrome.
        width: ($video-width-max * 0.01875%)
      &--gen-4--4,
      &--gen-5--1
        top: (($video-height-max / 16) - ($video-height-max / (10 * 16)))
      &--gen-4--4,
      &--gen-4--5,
      &--gen-5--1,
      &--gen-5--2
        width: ($video-width-max / 32)
      &--gen-4--5,
      &--gen-5--2,
      &--gen-5--3,
      &--gen-5--4,
      &--gen-6--0,
      &--gen-6--1
        left: 'calc(50% + %s)' % ($video-width-max * 15 / 32)

      &--gen-5--3,
      &--gen-6--0
        top: (($video-height-max * 1.5 / 640) + 0.25px) // To fix fractional pixel rendering in Chrome.
        width: ($video-width-max * 0.009375%)
      &--gen-5--4,
      &--gen-6--1
        top: (($video-height-max / 32) - ($video-height-max / (10 * 32)))
      &--gen-5--4,
      &--gen-5--5,
      &--gen-6--1,
      &--gen-6--2
        width: ($video-width-max * 0.015625%)
      &--gen-5--5,
      &--gen-6--2,
      &--gen-6--3,
      &--gen-6--4,
      &--gen-7--0,
      &--gen-7--1
        left: 'calc(50% + %s)' % ($video-width-max * 31 / 64)

      &--gen-6--3,
      &--gen-7--0
        top: (($video-height-max * 0.75 / 640) + 0.25px) // To fix fractional pixel rendering in Chrome.
        width: ($video-width-max * 0.0046875%)
      &--gen-6--4,
      &--gen-7--1
        top: (($video-height-max / 64) - ($video-height-max / (10 * 64)))
      &--gen-6--4,
      &--gen-6--5,
      &--gen-7--1,
      &--gen-7--2
        width: ($video-width-max * 0.0078125%)
      &--gen-6--5,
      &--gen-7--2,
      &--gen-7--3,
      &--gen-7--4,
      &--gen-8--0,
      &--gen-8--1
        left: 'calc(50% + %s)' % (floor($video-width-max * 63 / 128) - 0.01px)

      &--gen-7--3,
      &--gen-8--0
        top: (($video-height-max * 0.375 / 640) + 0.25px) // To fix fractional pixel rendering in Chrome.
        width: ($video-width-max * 0.00234375%)
      &--gen-7--4,
      &--gen-8--1
        top: (($video-height-max / 128) - ($video-height-max / (10 * 128)))
      &--gen-7--4,
      &--gen-7--5,
      &--gen-8--1,
      &--gen-8--2
        width: ($video-width-max * 0.00390625%)
      &--gen-7--5,
      &--gen-8--2,
      &--gen-8--3,
      &--gen-8--4
        left: 'calc(50% + %s)' % (floor($video-width-max * 127 / 256) - 0.51px)

      &--gen-8
        &--3
          top: (($video-height-max * 0.1875 / 640) + 0.25px) // To fix fractional pixel rendering in Chrome.
          width: ($video-width-max * 0.001171875%)
        &--4,
        &--5
          width: ($video-width-max * 0.001953125%)
        &--4
          top: (($video-height-max / 256) - ($video-height-max / (10 * 256)))
        &--5
          left: 'calc(50% + %s)' % (floor($video-width-max * 255 / 512) - 0.51px)
.main
  background-color: white
  position: relative
  text-align: center
.browser-advice
  color: white
  font-size: 1.87rem
  font-weight: bold
  position: relative
  z-index: 1
.content
  &__center
    margin: 0 auto
    padding: 0 5rem
    max-width: $bp-md-max
    @media all and (max-width: $bp-xs-max)
      padding: 0 3rem
  &__fixed
    padding-top: 1rem
  &__slider
    padding: '%srem 0' % main_content_translate_y
  &__fixed + .content__slider
    padding: '0 0 %srem' % (main_content_translate_y - 1)
.link--github
  display: flex
  justify-content: center
  line-height: 2.8rem
  &__anchor
    display: block
    &--arrow
      font-size: 2rem
      padding-left: 1rem
      width: 3.2rem
    @media (hover: hover)
      &:hover + .link--github__anchor--arrow,
      &--arrow:hover
        font-size: 2.2rem
.hider
  background-color: white
  position: fixed
  top: 'calc((100vw / 3) + %s + %s + %s)' % ($logo-height $branding-pad $heading-height)
  transition: height 0.5s linear 0.5s
  width: 100%
  height: 'calc(100vh - (100vw / 3) - %s - %s - %s)' % ($logo-height $branding-pad $heading-height)
  z-index: 1
  @media all and (max-width: $bp-sm-max)
    top: 'calc((100vw / 3) + %s + %s + %s)' % ($logo-height-small $branding-pad $heading-height)
    height: 'calc(100vh - (100vw / 3) - %s - %s - %s)' % ($logo-height-small $branding-pad $heading-height)
  @media all and (min-width: $video-width-max)
    top: 'calc((%s / 3) + %s + %s + %s)' % ($video-width-max $logo-height $branding-pad $heading-height)
    height: 'calc(100vh - (%s / 3) - %s - %s - %s)' % ($video-width-max $logo-height $branding-pad $heading-height)
  &.hider--out
    animation-duration: 1s
    animation-name: hiderOut
    height: 0
.es2018
  .browser-advice
    display: none
  .content
    display: flex
    align-items: center
    flex-direction: column
    position: absolute
    top: 0
    left: 0
    width: 100%
    &__slider
      opacity: 0
      transform: 'translateY(%srem)' % main_content_translate_y
      transition: opacity 0.5s, transform 0.5s
    &__slid
      opacity: 1
      transform: translateY(0)
