//////////////////////////////////////////////////////////////////
// variables.styl is shared between browser JavaScripts and Stylus.
// /////////////////////////////////////////////////////////////////////////////
@import '../../../_scripts/src/variables'

// /////////////////////////////////////////////////////////////////////////////
// The base on which the rest of the styles are built.
// /////////////////////////////////////////////////////////////////////////////
@import '0-base/00-variables'
@import '0-base/01-reset'
@import '0-base/02-helpers'
@import '0-base/03-global'

$video-width-max = 1728px
$video-height-max = ($video-width-max / 3)
$logo-width = '%spx' % logo_width    // Need px measurement to work around min font-size zoom-out bug in Webkit.
$logo-height = '%spx' % logo_height // Need px measurement to work around min font-size zoom-out bug in Webkit.
$branding-pad = '%srem' % branding_pad
$item-last-offset = '%srem' % item_last_offset

body
  color: $black-less-contrast
  position: relative
p
  margin-bottom: $space
.body__contain
  overflow: hidden
.video
  padding-bottom: (100% / 3)
  position: -webkit-sticky
  position: sticky
  top: 0
  width: 100%
  z-index: -1
  &__bg
    background: black
    position: absolute
    top: 0
    left: 0
    width: 50%
    height: 100%
  &__img
    position: absolute
    &--gen-0
      &--0,
      &--2,
      &--4,
      &--5
        width: 50%
      &--0
        z-index: 1
      &--1
        height: 100% 
      &--2,
      &--4
        top: (100% - 10%) // top rule (not bottom) necessary for Safari.
      &--3
        top: (100% * 48 / 640)
        width: 30%
      &--5
        left: 50%
    &--gen-1
      &--0
        top: (100% * 48 / 640)
        width: 30%
      &--1,
      &--2
        width: 50%
      &--1
        top: 90%
      &--2,
      &--3,
      &--4
        left: 50%
      &--3
        top: (100% * 24 / 640)
        width: 15%
      &--4,
      &--5
        width: 25%
      &--4
        top: (50% - 5%)
      &--5
        left: (50% + (100% * 1 / 4))
    &--gen-2
      &--0,
      &--1
        left: 50%
      &--0
        top: (100% * 24 / 640)
        width: 15%
      &--1,
      &--2
        width: 25%
      &--1
        top: (50% - 5%)
      &--2,
      &--3,
      &--4
        left: (50% + (100% * 1 / 4))
      &--3
        top: (100% * 12 / 640)
        width: 7.5%
      &--4,
      &--5
        width: 12.5%
      &--4
        top: (25% - 2.5%)
      &--5
        left: (50% + (100% * 3 / 8))
    &--gen-3
      &--0
      &--1
        left: (50% + (100% * 1 / 4))
      &--0
        top: (100% * 12 / 640)
        width: 7.5%
      &--1,
      &--2
        width: 12.5%
      &--1
        top: (25% - 2.5%)
      &--2,
      &--3,
      &--4
        left: (50% + (100% * 3 / 8))
      &--3
        top: (100% * 6 / 640)
        width: 3.75%
      &--4,
      &--5
        width: 6.25%
      &--4
        top: (12.5% - 1.25%)
      &--5
        left: (50% + (100% * 7 / 16))
    &--gen-4
      &--0,
      &--1
        left: (50% + (100% * 3 / 8))
      &--0
        top: (100% * 6 / 640)
        width: 3.75%
      &--1,
      &--2
        width: 6.25%
      &--1
        top: (12.5% - 1.25%)
      &--2,
      &--3,
      &--4
        left: (50% + (100% * 7 / 16))
      &--3
        top: (100% * 3 / 640)
        width: 1.875%
      &--4,
      &--5
        width: 3.125%
      &--4
        top: (6.25% - 0.625%)
      &--5
        left: (50% + (100% * 15 / 32))
    &--gen-5
      &--0
      &--1
        left: (50% + (100% * 7 / 16))
      &--0
        top: (100% * 3 / 640)
        width: 1.875%
      &--1,
      &--2
        width: 3.125%
      &--1
        top: (6.25% - 0.625%)
      &--2,
      &--3,
      &--4
        left: (50% + (100% * 15 / 32))
      &--3
        top: (100% * 1.5 / 640)
        width: 0.9375%
      &--4,
      &--5
        width: 1.5625%
      &--4
        top: (3.125% - 0.3125%)
      &--5
        left: (50% + (100% * 31 / 64))
    &--gen-6
      &--0,
      &--1
        left: (50% + (100% * 15 / 32))
      &--0
        top: (100% * 1.5 / 640)
        width: 0.9375%
      &--1,
      &--2
        width: 1.5625%
      &--1
        top: (3.125% - 0.3125%)
      &--2,
      &--3,
      &--4
        left: (50% + (100% * 31 / 64))
      &--3
        top: (100% * 0.75 / 640)
        width: 0.46875%
      &--4,
      &--5
        width: 0.78125%
      &--4
        top: (1.5625% - 0.15625%)
      &--5
        left: (50% (100% * 63 / 128))
    &--gen-7
      &--0,
      &--1
        left: (50% + (100% * 31 / 64))
      &--0
        top: (100% * 0.75 / 640)
        width: 0.46875%
      &--1,
      &--2
        width: 0.78125%
      &--1
        top: (1.5625% - 0.15625%)
      &--2,
      &--3,
      &--4
        left: (50% + (100% * 63 / 128))
      &--3
        top: (100% * 0.375 / 640)
        width: 0.234375%
      &--4,
      &--5
        width: 0.390625%
      &--4
        top: (0.78125% - 0.078125%)
      &--5
        left: (50% + (100% * 127 / 256))
    &--gen-8
      &--0,
      &--1
        left: (50% + (100% * 63 / 128))
      &--0
        top: (100% * 0.375 / 640)
        width: 0.234375%
      &--1,
      &--2
        width: 0.390625%
      &--1
        top: (0.78125% - 0.078125%)
      &--2,
      &--3,
      &--4
        left: (50% + (100% * 127 / 256))
      &--3
        top: (100% * 0.1875 / 640)
        width: 0.1171875%
      &--4,
      &--5
        width: 0.1953125%
      &--4
        top: (0.390625% - 0.0390625%)
      &--5
        left: (50% + (100% * 255 / 512))
@media all and (min-width: $video-width-max)
  .video
    padding-top: 0
    &__bg
      height: $video-height-max
    &__img
      &--gen-0
        &--0,
        &--1,
        &--2,
        &--3,
        &--4
          left: 50%
          transform: translateX(-($video-width-max / 2))
        &--0,
        &--2,
        &--4,
        &--5
          width: ($video-width-max / 2)
        &--1
          height: $video-height-max
        &--2,
        &--4
          top: ($video-height-max - ($video-width-max / (2 * 15)))
        &--3
          top: ($video-height-max * 48 / 640)
          width: ($video-width-max * 0.3)
      &--gen-1
        &--0,
        &--1
          left: 50%
          transform: translateX(-($video-width-max / 2))
        &--0
          top: ($video-height-max * 48 / 640)
          width: ($video-width-max * 0.3)
        &--1,
        &--2
          width: ($video-width-max / 2)
        &--1
          top: ($video-height-max - ($video-width-max / (2 * 15)))
        &--3
          top: ($video-height-max * 24 / 640)
          width: ($video-width-max * 0.15)
        &--4,
        &--5
          width: ($video-width-max * 0.25)
        &--4
          top: ($video-width-max * 0.149)
        &--5
          left: 'calc(50% + %s)' % ($video-width-max / 4)
      &--gen-2
        &--0
          top: ($video-height-max * 24 / 640)
          width: ($video-width-max * 0.15)
        &--1,
        &--2
          width: ($video-width-max * 0.25)
        &--1
          top: ($video-width-max * 0.149)
        &--2,
        &--3,
        &--4
          left: 'calc(50% + %s)' % ($video-width-max / 4)
        &--3
          top: ($video-height-max * 12 / 640)
          width: ($video-width-max * 0.075)
        &--4,
        &--5
          width: ($video-width-max * 0.125)
        &--4
          top: ($video-width-max * 0.149 / 2)
        &--5
          left: 'calc(50% + %s)' % ($video-width-max * 3 / 8)
      &--gen-3
        &--0
        &--1
          left: 'calc(50% + %s)' % ($video-width-max / 4)
        &--0
          top: ($video-height-max * 12 / 640)
          width: ($video-width-max * 0.075)
        &--1,
        &--2
          width: ($video-width-max * 0.125)
        &--1
          top: ($video-width-max * 0.149 / 2)
        &--2,
        &--3,
        &--4
          left: 'calc(50% + %s)' % ($video-width-max * 3 / 8)
        &--3
          top: ($video-height-max * 6 / 640)
          width: ($video-width-max * 0.0375)
        &--4,
        &--5
          width: ($video-width-max * 0.0625)
        &--4
          top: ($video-width-max * 0.149 / 4)
        &--5
          left: 'calc(50% + %s)' % ($video-width-max * 7 / 16)
      &--gen-4
        &--0,
        &--1
          left: 'calc(50% + %s)' % ($video-width-max * 3 / 8)
        &--0
          top: ($video-height-max * 6 / 640)
          width: ($video-width-max * 0.0375)
        &--1,
        &--2
          width: ($video-width-max * 0.0625)
        &--1
          top: ($video-width-max * 0.149 / 4)
        &--2,
        &--3,
        &--4
          left: 'calc(50% + %s)' % ($video-width-max * 7 / 16)
        &--3
          top: ($video-height-max * 3 / 640)
          width: ($video-width-max * 0.01875%)
        &--4,
        &--5
          width: ($video-width-max * 0.03125%)
        &--4
          top: ($video-width-max * 0.149 / 8)
        &--5
          left: 'calc(50% + %s)' % ($video-width-max * 15 / 32)
      &--gen-5
        &--0
        &--1
          left: 'calc(50% + %s)' % ($video-width-max * 7 / 16)
        &--0
          top: ($video-height-max * 3 / 640)
          width: ($video-width-max * 0.01875%)
        &--1,
        &--2
          width: ($video-width-max * 0.03125%)
        &--1
          top: ($video-width-max * 0.149 / 8)
        &--2,
        &--3,
        &--4
          left: 'calc(50% + %s)' % ($video-width-max * 15 / 32)
        &--3
          top: ($video-height-max * 1.5 / 640)
          width: ($video-width-max * 0.009375%)
        &--4,
        &--5
          width: ($video-width-max * 0.015625%)
        &--4
          top: ($video-width-max * 0.149 / 16)
        &--5
          left: 'calc(50% + %s)' % ($video-width-max * 31 / 64)
      &--gen-6
        &--0,
        &--1
          left: 'calc(50% + %s)' % ($video-width-max * 15 / 32)
        &--0
          top: ($video-height-max * 1.5 / 640)
          width: ($video-width-max * 0.009375%)
        &--1,
        &--2
          width: ($video-width-max * 0.015625%)
        &--1
          top: ($video-width-max * 0.149 / 16)
        &--2,
        &--3,
        &--4
          left: 'calc(50% + %s)' % ($video-width-max * 31 / 64)
        &--3
          top: ($video-height-max * 0.75 / 640)
          width: ($video-width-max * 0.0046875%)
        &--4,
        &--5
          width: ($video-width-max * 0.0078125%)
        &--4
          top: ($video-width-max * 0.149 / 32)
        &--5
          left: 'calc(50% + %s)' % ($video-width-max * 63 / 128)
      &--gen-7
        &--0,
        &--1
          left: 'calc(50% + %s)' % ($video-width-max * 31 / 64)
        &--0
          top: ($video-height-max * 0.75 / 640)
          width: ($video-width-max * 0.0046875%)
        &--1,
        &--2
          width: ($video-width-max * 0.0078125%)
        &--1
          top: ($video-width-max * 0.149 / 32)
        &--2,
        &--3,
        &--4
          left: 'calc(50% + %s)' % ($video-width-max * 63 / 128)
        &--3
          top: ($video-height-max * 0.375 / 640)
          width: ($video-width-max * 0.00234375%)
        &--4,
        &--5
          width: ($video-width-max * 0.00390625%)
        &--4
          top: ($video-width-max * 0.149 / 64)
        &--5
          left: 'calc(50% + %s)' % ($video-width-max * 127 / 256)
      &--gen-8
        &--0,
        &--1
          left: 'calc(50% + %s)' % ($video-width-max * 63 / 128)
        &--0
          top: ($video-height-max * 0.375 / 640)
          width: ($video-width-max * 0.00234375%)
        &--1,
        &--2
          width: ($video-width-max * 0.00390625%)
        &--1
          top: ($video-width-max * 0.149 / 64)
        &--2,
        &--3,
        &--4
          left: 'calc(50% + %s)' % ($video-width-max * 127 / 256)
        &--3
          top: ($video-height-max * 0.1875 / 640)
          width: ($video-width-max * 0.001171875%)
        &--4,
        &--5
          width: ($video-width-max * 0.001953125%)
        &--4
          top: ($video-width-max * 0.149 / 128)
        &--5
          left: 'calc(50% + %s)' % ($video-width-max * 255 / 512)
.branding
  background: white
  padding: 1rem 0
  position: -webkit-sticky
  position: sticky
  top: -0.1rem // To not show 1px of text at top of screen on Chrome.
  width: 100%
  z-index: 1
.logo
  margin: 0 auto
  overflow: hidden
  position: relative
  width: $logo-width
  height: $logo-height
  @media all and (max-width: $bp-sm-max)
    transform: scale(0.75)
  &__bg
    background: linear-gradient(to right, $green, $green 10%, rgb(200,181,17.5) 32.5%, $yellow 42.5%, $yellow 57.5%, rgb(255,160,17.5) 65%, $red 90%, $red);
    position: absolute
    top: 0
    right: -900%
    width: 300rem
    height: 100%
  &__img
    position: relative
    top: 0
    left: 0
  &__border
    border: 0.05rem solid white
    position: absolute
    top: 0
    right: 0
    width: 100%
    height: 100%
.main
  background: white
  position: relative
  text-align: center
.content
  &__center
    margin: 0 auto
    max-width: $content-width-max
  &__fixed
    padding-top: 1rem
  &__slider
    padding: '%srem 0' % main_content_translate_y
    @media all and (max-width: $bp-md-max)
      margin: 0 ($space-quarter * 3)
  &__fixed + .content__slider
    padding: '0 0 %srem' % (main_content_translate_y - 1)
.link-github
  display: flex
  justify-content: center
  line-height: 2.8rem
  &__anchor
    display: block
    &:hover + .link-github__anchor--arrow,
    &--arrow:hover
      font-size: 2.2rem
    &--arrow
      font-size: 2rem
      padding-left: 1rem
      width: 3.2rem
.hider
  background: white
  position: fixed
  top: 'calc(%s + %s + (2 * %s))' % ($video-height $logo-height $branding-pad)
  width: 100%
  height: 100vh
.bottom
  background: white
  padding-top: 'calc(100vh - %s - %s - (2 * %s) - 15.6rem)' % ($item-last-offset $logo-height $branding-pad)
  position: relative
.footer
  background: black
  color: white
  padding: 3rem 0
  text-align: center
  width: 100%
html.es6-modules-enabled
  .browser-advice
    display: none
  .content
    display: flex
    align-items: center
    flex-direction: column
    position: absolute
    top: 0
    left: 0
    width: 100%
    &__slider
      opacity: 0;
      transform: 'translateY(%srem)' % main_content_translate_y
      transition: opacity 0.5s, transform 0.5s
    &__slid
      opacity: 1
      transform: translateY(0)
// Remove this if position: sticky ever renders well on MS Edge.
html.ms-edge
  .video,
  .branding
    position: static
